# ç’°å¢ƒèªªæ˜ (é–‹ç™¼ vs éƒ¨ç½²)

## ç’°å¢ƒé¡å‹æ¦‚è¿°

æœ¬å°ˆæ¡ˆæ”¯æ´å¤šç¨®åŸ·è¡Œç’°å¢ƒï¼Œæ¯ç¨®ç’°å¢ƒéƒ½æœ‰ä¸åŒçš„é…ç½®å’Œç”¨é€”ï¼š

1. **é–‹ç™¼ç’°å¢ƒ (Development)** - æœ¬åœ°é–‹ç™¼å’Œæ¸¬è©¦
2. **Docker ç’°å¢ƒ (Docker)** - å®¹å™¨åŒ–éƒ¨ç½²  
3. **ç”Ÿç”¢ç’°å¢ƒ (Production)** - æ­£å¼éƒ¨ç½²ç’°å¢ƒ

æ¯å€‹ç’°å¢ƒéƒ½æœ‰å°ˆé–€çš„é…ç½®æª”æ¡ˆï¼š

### ğŸ“ **å‰ç«¯ç’°å¢ƒé…ç½®æª”æ¡ˆ**
```
client/
â”œâ”€â”€ .env                 # é è¨­/fallback ç’°å¢ƒ (é–‹ç™¼æ¨¡å¼)
â”œâ”€â”€ .env.development     # æœ¬åœ°é–‹ç™¼ç’°å¢ƒ  
â”œâ”€â”€ .env.docker          # Docker éƒ¨ç½²ç’°å¢ƒ
â”œâ”€â”€ .env.production      # ç”Ÿç”¢ç’°å¢ƒ
â””â”€â”€ .env.example         # ç¯„æœ¬æª”æ¡ˆ
```

### ğŸ“ **å¾Œç«¯ç’°å¢ƒé…ç½®æª”æ¡ˆ**
```
server/
â”œâ”€â”€ .env                 # é è¨­/fallback ç’°å¢ƒ (é–‹ç™¼æ¨¡å¼)
â”œâ”€â”€ .env.development     # æœ¬åœ°é–‹ç™¼ç’°å¢ƒ
â”œâ”€â”€ .env.docker          # Docker éƒ¨ç½²ç’°å¢ƒ
â”œâ”€â”€ .env.production      # ç”Ÿç”¢ç’°å¢ƒ  
â””â”€â”€ .env.example         # ç¯„æœ¬æª”æ¡ˆ
```

## æ ¹ç›®éŒ„ npm æŒ‡ä»¤èªªæ˜

æ ¹ç›®éŒ„çš„ `package.json` æä¾›äº†ä¾¿åˆ©çš„æŒ‡ä»¤ä¾†ç®¡ç†æ•´å€‹å°ˆæ¡ˆï¼š

### é–‹ç™¼ç›¸é—œæŒ‡ä»¤
```bash
# å®‰è£æ‰€æœ‰ä¾è³´ (æ ¹ç›®éŒ„ã€å‰ç«¯ã€å¾Œç«¯)
npm run install:all

# åƒ…å•Ÿå‹•å‰ç«¯é–‹ç™¼ä¼ºæœå™¨ (Vite)
npm run dev:client

# åƒ…å•Ÿå‹•å‰ç«¯é–‹ç™¼ä¼ºæœå™¨ (Docker æ¨¡å¼)
npm run dev:client:docker

# åƒ…å•Ÿå‹•å¾Œç«¯é–‹ç™¼ä¼ºæœå™¨ (Nodemon)
npm run dev:server

# åƒ…å•Ÿå‹•å¾Œç«¯é–‹ç™¼ä¼ºæœå™¨ (Docker æ¨¡å¼)
npm run dev:server:docker

# åŒæ™‚å•Ÿå‹•å‰å¾Œç«¯é–‹ç™¼ä¼ºæœå™¨ (é–‹ç™¼ç’°å¢ƒ)
npm run dev

# åŒæ™‚å•Ÿå‹•å‰å¾Œç«¯é–‹ç™¼ä¼ºæœå™¨ (Docker ç’°å¢ƒ)
npm run dev:docker
```

### å»ºç½®å’Œéƒ¨ç½²æŒ‡ä»¤
```bash
# å»ºç½®å‰ç«¯å°ˆæ¡ˆ (ç”Ÿç”¢ç’°å¢ƒ)
npm run build

# å»ºç½®å‰ç«¯å°ˆæ¡ˆ (Docker ç’°å¢ƒ)
npm run build:docker

# å»ºç½®å‰ç«¯å°ˆæ¡ˆ (é–‹ç™¼ç’°å¢ƒ)
npm run build:dev

# å•Ÿå‹•ç”Ÿç”¢æ¨¡å¼å¾Œç«¯ä¼ºæœå™¨
npm start

# å•Ÿå‹• Docker æ¨¡å¼å¾Œç«¯ä¼ºæœå™¨
npm run start:docker
```

### è³‡æ–™åº«ç®¡ç†æŒ‡ä»¤
```bash
# åˆå§‹åŒ–è³‡æ–™åº« (å»ºç«‹è¡¨æ ¼å’Œç¯„ä¾‹è³‡æ–™)
npm run db:init

# æ¸…ç©ºè³‡æ–™åº«ä¸¦é‡æ–°åˆå§‹åŒ–
npm run db:clear

# æª¢æŸ¥è³‡æ–™åº«é€£ç·šç‹€æ…‹
npm run db:check

# ç”Ÿæˆ SQL æª”æ¡ˆ
npm run db:generate-sql
```

## é–‹ç™¼ç’°å¢ƒè¨­å®š

### é©ç”¨æƒ…å¢ƒ
- æœ¬åœ°é–‹ç™¼å’Œé™¤éŒ¯
- æ–°åŠŸèƒ½é–‹ç™¼
- å¿«é€ŸåŸå‹è£½ä½œ

### ç’°å¢ƒéœ€æ±‚
- Node.js 18+
- MySQL è³‡æ–™åº« (å¯ä»¥æ˜¯æœ¬åœ°æˆ–é ç«¯)
- Git

### è¨­å®šæ­¥é©Ÿ

1. **è¤‡è£½å°ˆæ¡ˆ**
```bash
git clone <repository-url>
cd GDG-Portal
```

2. **å®‰è£ä¾è³´**
```bash
npm run install:all
```

3. **é…ç½®ç’°å¢ƒè®Šæ•¸**
ç¾åœ¨æ¯å€‹ç’°å¢ƒéƒ½æœ‰å°ˆé–€çš„é…ç½®æª”æ¡ˆï¼š

**é–‹ç™¼ç’°å¢ƒé…ç½®** (`server/.env.development`)ï¼š
```bash
# å¾Œç«¯é–‹ç™¼ç’°å¢ƒè®Šæ•¸
NODE_ENV=development
PORT=5000
CLIENT_URL=http://localhost:5173
OAUTH_CALLBACK_URL=http://localhost:5000/api/auth/google/redirect

# è³‡æ–™åº«è¨­å®š (é–‹ç™¼ç’°å¢ƒ)
DB_HOST=localhost
DB_PORT=3306
DB_NAME=gdg_portal
DB_USER=gdg_admin
DB_PASSWORD=gdg_secure_NEW_2025

# JWT å®‰å…¨é‡‘é‘°
JWT_SECRET=development-jwt-secret-2024-very-secure-key
JWT_REFRESH_SECRET=development-refresh-jwt-secret-2024-very-secure-key
JWT_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d
COOKIE_SECRET=development-cookie-secret-2024-very-secure-key

# Google OAuth è¨­å®š
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret
```

**å‰ç«¯é–‹ç™¼ç’°å¢ƒé…ç½®** (`client/.env.development`)ï¼š
```bash
# å‰ç«¯é–‹ç™¼ç’°å¢ƒè®Šæ•¸
NODE_ENV=development

# å¾Œç«¯ API åŸºç¤ URL (é–‹ç™¼ç’°å¢ƒ)
VITE_API_BASE_URL=http://localhost:5000

# å‰ç«¯æ‡‰ç”¨ URL
VITE_CLIENT_URL=http://localhost:5173

# Google OAuth å®¢æˆ¶ç«¯ ID (é–‹ç™¼ç”¨)
VITE_GOOGLE_CLIENT_ID=your_google_client_id_here

# é–‹ç™¼æ¨¡å¼åŠŸèƒ½é–‹é—œ
VITE_ENABLE_DEV_TOOLS=true
VITE_SHOW_DEV_LOGIN=true

# API ä»£ç†è¨­å®š (çµ¦ Vite ä½¿ç”¨)
VITE_PROXY_TARGET=http://localhost:5000
```

4. **è¨­å®šè³‡æ–™åº«**
```bash
# æª¢æŸ¥è³‡æ–™åº«é€£ç·š
npm run db:check

# åˆå§‹åŒ–è³‡æ–™åº«
npm run db:init
```

5. **å•Ÿå‹•é–‹ç™¼ä¼ºæœå™¨**
```bash
# åŒæ™‚å•Ÿå‹•å‰å¾Œç«¯
npm run dev
```

### é–‹ç™¼ç’°å¢ƒç‰¹è‰²
- **ç†±é‡è¼‰** - ç¨‹å¼ç¢¼è®Šæ›´æ™‚è‡ªå‹•é‡æ–°è¼‰å…¥
- **è©³ç´°æ—¥èªŒ** - é¡¯ç¤ºæ‰€æœ‰ SQL æŸ¥è©¢å’ŒéŒ¯èª¤è©³æƒ…
- **CORS è¨­å®š** - å…è¨±å‰ç«¯ (5173) å­˜å–å¾Œç«¯ (3000)
- **æª”æ¡ˆç›£æ§** - ä½¿ç”¨ Nodemon ç›£æ§å¾Œç«¯æª”æ¡ˆè®Šæ›´

### é–‹ç™¼å·¥å…·
```javascript
// server/config/database.js (é–‹ç™¼æ¨¡å¼)
const sequelize = new Sequelize(database, username, password, {
  host: host,
  dialect: 'mysql',
  logging: console.log,        // é¡¯ç¤º SQL æŸ¥è©¢
  define: {
    charset: 'utf8mb4',
    collate: 'utf8mb4_unicode_ci'
  }
});
```

### API æœå‹™å±¤ (å‰ç«¯)
æ–°ç‰ˆæœ¬åŠ å…¥äº†çµ±ä¸€çš„ API æœå‹™å±¤ (`client/src/services/apiService.js`)ï¼š

```javascript
// ä½¿ç”¨ç’°å¢ƒè®Šæ•¸é…ç½®çš„ API æœå‹™
import { apiService, apiConfig } from '@/services/apiService';

// è‡ªå‹•æ ¹æ“šç’°å¢ƒé¸æ“‡æ­£ç¢ºçš„ API ç«¯é»
const response = await apiService.get('/api/core-team');

// ç’°å¢ƒé…ç½®æª¢æŸ¥
console.log('API Base URL:', apiConfig.baseURL);
console.log('Development mode:', apiConfig.isDevelopment);
console.log('Show dev tools:', apiConfig.showDevTools);
```

**API æœå‹™ç‰¹è‰²**ï¼š
- **ç’°å¢ƒè‡ªé©æ‡‰** - è‡ªå‹•æ ¹æ“š `VITE_API_BASE_URL` é¸æ“‡ç«¯é»
- **çµ±ä¸€éŒ¯èª¤è™•ç†** - çµ±ä¸€çš„è¶…æ™‚å’ŒéŒ¯èª¤è™•ç†æ©Ÿåˆ¶
- **é–‹ç™¼å·¥å…·æ”¯æ´** - æ ¹æ“šç’°å¢ƒè®Šæ•¸æ§åˆ¶é–‹ç™¼åŠŸèƒ½é¡¯ç¤º

## Docker ç’°å¢ƒè¨­å®š

### é©ç”¨æƒ…å¢ƒ
- å¿«é€Ÿéƒ¨ç½²å’Œæ¸¬è©¦
- ç’°å¢ƒä¸€è‡´æ€§ä¿è­‰
- å®¹å™¨åŒ–éƒ¨ç½²
- åœ˜éšŠå”ä½œ

### ç’°å¢ƒéœ€æ±‚
- Docker Desktop
- Docker Compose

### è¨­å®šæ­¥é©Ÿ

1. **ä½¿ç”¨ä¸€éµéƒ¨ç½²è…³æœ¬**
```bash
# Windows
.\deploy-docker.bat

# æˆ–æ‰‹å‹•åŸ·è¡Œ
docker-compose up --build -d
```

2. **ç’°å¢ƒè®Šæ•¸é…ç½®**
Docker ç’°å¢ƒä½¿ç”¨å°ˆé–€çš„é…ç½®æª”æ¡ˆï¼š

**å¾Œç«¯ Docker é…ç½®** (`server/.env.docker`)ï¼š
```bash
# å¾Œç«¯ Docker ç’°å¢ƒè®Šæ•¸
NODE_ENV=docker
PORT=3000
CLIENT_URL=http://localhost:3000
OAUTH_CALLBACK_URL=http://localhost:3000/api/auth/google/redirect

# è³‡æ–™åº«è¨­å®š (Docker å…§éƒ¨ç¶²è·¯)
DB_HOST=mysql              # Docker æœå‹™åç¨±
DB_PORT=3306
DB_NAME=gdg_portal
DB_USER=gdg_admin
DB_PASSWORD=gdg_secure_NEW_2025

# JWT å®‰å…¨é‡‘é‘° (Docker å°ˆç”¨)
JWT_SECRET=docker-production-jwt-secret-2024-very-secure-key
JWT_REFRESH_SECRET=docker-production-refresh-jwt-secret-2024-very-secure-key
JWT_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d
COOKIE_SECRET=docker-production-cookie-secret-2024-very-secure-key

# Google OAuth è¨­å®š
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret
```

**å‰ç«¯ Docker é…ç½®** (`client/.env.docker`)ï¼š
```bash
# å‰ç«¯ Docker ç’°å¢ƒè®Šæ•¸
NODE_ENV=production

# å¾Œç«¯ API åŸºç¤ URL (Docker å…§éƒ¨ç¶²è·¯)
VITE_API_BASE_URL=http://localhost:3000

# å‰ç«¯æ‡‰ç”¨ URL (Docker éƒ¨ç½²)
VITE_CLIENT_URL=http://localhost:3000

# Google OAuth å®¢æˆ¶ç«¯ ID (æ­£å¼ç”¨)
VITE_GOOGLE_CLIENT_ID=your_google_client_id_here

# ç”Ÿç”¢æ¨¡å¼åŠŸèƒ½é–‹é—œ
VITE_ENABLE_DEV_TOOLS=false
VITE_SHOW_DEV_LOGIN=false

# API ä»£ç†è¨­å®š (Docker ç’°å¢ƒ)
VITE_PROXY_TARGET=http://localhost:3000
```

### Docker æœå‹™æ¶æ§‹
```yaml
# docker-compose.yml
services:
  app:           # Node.js æ‡‰ç”¨ç¨‹å¼
    ports: ["3000:3000"]
    
  mysql:         # MySQL 8.0 è³‡æ–™åº«
    ports: ["3306:3306"]
    
  adminer:       # è³‡æ–™åº«ç®¡ç†ä»‹é¢
    ports: ["8080:8080"]
```

### Docker ç’°å¢ƒç‰¹è‰²
- **å®Œå…¨éš”é›¢** - æ‰€æœ‰æœå‹™é‹è¡Œåœ¨å®¹å™¨ä¸­
- **ä¸€éµéƒ¨ç½²** - è‡ªå‹•å»ºç½®å’Œå•Ÿå‹•æ‰€æœ‰æœå‹™
- **è³‡æ–™æŒä¹…åŒ–** - MySQL è³‡æ–™å­˜å„²åœ¨ Docker volume
- **ç®¡ç†ä»‹é¢** - Adminer æä¾›åœ–å½¢åŒ–è³‡æ–™åº«ç®¡ç†

### æœ‰ç”¨çš„ Docker æŒ‡ä»¤
```bash
# æŸ¥çœ‹å®¹å™¨ç‹€æ…‹
docker-compose ps

# æŸ¥çœ‹æ‡‰ç”¨ç¨‹å¼æ—¥èªŒ
docker-compose logs app

# é‡æ–°å»ºç½®ä¸¦å•Ÿå‹•
docker-compose up --build -d

# åœæ­¢æ‰€æœ‰æœå‹™
docker-compose down

# é€²å…¥æ‡‰ç”¨ç¨‹å¼å®¹å™¨
docker-compose exec app sh

# é€²å…¥ MySQL å®¹å™¨
docker-compose exec mysql mysql -u gdg_admin -p
```

## ç”Ÿç”¢ç’°å¢ƒè¨­å®š

### é©ç”¨æƒ…å¢ƒ
- æ­£å¼ç¶²ç«™éƒ¨ç½²
- é«˜å¯ç”¨æ€§éœ€æ±‚
- å®‰å…¨æ€§è¦æ±‚è¼ƒé«˜

### ç’°å¢ƒéœ€æ±‚
- Linux ä¼ºæœå™¨ (Ubuntu/CentOS)
- Nginx åå‘ä»£ç†
- SSL æ†‘è­‰
- åŸŸå

### è¨­å®šæ­¥é©Ÿ

1. **ä¼ºæœå™¨æº–å‚™**
```bash
# æ›´æ–°ç³»çµ±
sudo apt update && sudo apt upgrade -y

# å®‰è£ Docker
curl -fsSL https://get.docker.com -o get-docker.sh
sh get-docker.sh

# å®‰è£ Docker Compose
sudo apt install docker-compose-plugin
```

2. **å°ˆæ¡ˆéƒ¨ç½²**
```bash
# è¤‡è£½å°ˆæ¡ˆåˆ°ä¼ºæœå™¨
git clone <repository-url>
cd GDG-Portal

# é…ç½®ç”Ÿç”¢ç’°å¢ƒè®Šæ•¸
cp .env.example .env.production
# ç·¨è¼¯ .env.production è¨­å®šå¯¦éš›çš„ç”Ÿç”¢åƒæ•¸
```

3. **Nginx é…ç½®**
```nginx
# /etc/nginx/sites-available/gdg-portal
server {
    listen 80;
    server_name your-domain.com;
    
    location / {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
    }
}
```

### ç”Ÿç”¢ç’°å¢ƒè®Šæ•¸ç¯„ä¾‹

**å¾Œç«¯ç”Ÿç”¢é…ç½®** (`server/.env.production`)ï¼š
```bash
# å¾Œç«¯ç”Ÿç”¢ç’°å¢ƒè®Šæ•¸
NODE_ENV=production
PORT=3000
CLIENT_URL=https://your-domain.com
OAUTH_CALLBACK_URL=https://your-domain.com/api/auth/google/redirect

# è³‡æ–™åº«è¨­å®š (ç”Ÿç”¢ç’°å¢ƒ)
DB_HOST=localhost
DB_PORT=3306
DB_NAME=gdg_portal_prod
DB_USER=gdg_prod_user
DB_PASSWORD=super_secure_password_2024

# JWT å®‰å…¨é‡‘é‘° (ç”Ÿç”¢ç’°å¢ƒ - å¿…é ˆæ›´æ›)
JWT_SECRET=production-jwt-secret-very-long-and-secure
JWT_REFRESH_SECRET=production-refresh-jwt-secret-very-long-and-secure
JWT_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d
COOKIE_SECRET=production-cookie-secret-very-long-and-secure

# Google OAuth è¨­å®š (ç”Ÿç”¢ç’°å¢ƒ)
GOOGLE_CLIENT_ID=your-production-google-client-id
GOOGLE_CLIENT_SECRET=your-production-google-client-secret
```

**å‰ç«¯ç”Ÿç”¢é…ç½®** (`client/.env.production`)ï¼š
```bash
# å‰ç«¯ç”Ÿç”¢ç’°å¢ƒè®Šæ•¸
NODE_ENV=production

# å¾Œç«¯ API åŸºç¤ URL (ç”Ÿç”¢ç’°å¢ƒ)
VITE_API_BASE_URL=https://your-domain.com

# å‰ç«¯æ‡‰ç”¨ URL (ç”Ÿç”¢ç’°å¢ƒ)
VITE_CLIENT_URL=https://your-domain.com

# Google OAuth å®¢æˆ¶ç«¯ ID (ç”Ÿç”¢ç”¨)
VITE_GOOGLE_CLIENT_ID=your_production_google_client_id_here

# ç”Ÿç”¢æ¨¡å¼åŠŸèƒ½é–‹é—œ
VITE_ENABLE_DEV_TOOLS=false
VITE_SHOW_DEV_LOGIN=false
```

### ç”Ÿç”¢ç’°å¢ƒç‰¹è‰²
- **æ•ˆèƒ½æœ€ä½³åŒ–** - å£“ç¸®éœæ…‹æª”æ¡ˆã€å•Ÿç”¨å¿«å–
- **å®‰å…¨å¼·åŒ–** - HTTPSã€å®‰å…¨æ¨™é ­ã€è¼¸å…¥é©—è­‰
- **æ—¥èªŒè¨˜éŒ„** - è©³ç´°çš„å­˜å–å’ŒéŒ¯èª¤æ—¥èªŒ
- **ç›£æ§å‘Šè­¦** - ç³»çµ±ç›£æ§å’Œç•°å¸¸é€šçŸ¥

### ç”Ÿç”¢éƒ¨ç½²æŒ‡ä»¤
```bash
# ç”Ÿç”¢æ¨¡å¼å•Ÿå‹•
NODE_ENV=production npm start

# æˆ–ä½¿ç”¨ PM2 ç®¡ç†ç¨‹åº
npm install -g pm2
pm2 start server/index.js --name gdg-portal
pm2 startup
pm2 save
```

## ç’°å¢ƒæ¯”è¼ƒè¡¨

| ç‰¹æ€§ | é–‹ç™¼ç’°å¢ƒ | Docker ç’°å¢ƒ | ç”Ÿç”¢ç’°å¢ƒ |
|------|----------|-------------|----------|
| **å•Ÿå‹•æ–¹å¼** | `npm run dev` | `npm run dev:docker` | `npm start` / PM2 |
| **å‰ç«¯ç«¯å£** | 5173 (Vite) | 3000 (éœæ…‹) | 3000 (éœæ…‹) |
| **å¾Œç«¯ç«¯å£** | 5000 | 3000 | 3000 |
| **è³‡æ–™åº«ä¸»æ©Ÿ** | localhost | mysql (å®¹å™¨) | localhost |
| **ç†±é‡è¼‰** | âœ… | âŒ | âŒ |
| **SQL æ—¥èªŒ** | âœ… | âœ… | âŒ |
| **é–‹ç™¼å·¥å…·** | âœ… | âŒ | âŒ |
| **å¿«é€Ÿç™»å…¥** | âœ… | âŒ | âŒ |
| **HTTPS** | âŒ | âŒ | âœ… |
| **å¿«å–** | âŒ | âŒ | âœ… |
| **å®¹å™¨åŒ–** | âŒ | âœ… | å¯é¸ |
| **é…ç½®æª”æ¡ˆ** | `.env.development` | `.env.docker` | `.env.production` |
| **é©ç”¨å ´æ™¯** | æœ¬åœ°é–‹ç™¼ | æ¸¬è©¦/Demo | æ­£å¼ç¶²ç«™ |

## ç’°å¢ƒåˆ‡æ›

### å¾é–‹ç™¼åˆ‡æ›åˆ° Docker
```bash
# åœæ­¢é–‹ç™¼ä¼ºæœå™¨
# Ctrl+C åœæ­¢ npm run dev

# å•Ÿå‹• Docker ç’°å¢ƒ (æ–°æ–¹å¼)
npm run dev:docker

# æˆ–ä½¿ç”¨ docker-compose ç›´æ¥æ“ä½œ
docker-compose up --build -d
```

### å¾ Docker åˆ‡æ›åˆ°é–‹ç™¼
```bash
# åœæ­¢ Docker æœå‹™
docker-compose down

# å•Ÿå‹•é–‹ç™¼ç’°å¢ƒ
npm run dev
```

### ç’°å¢ƒè®Šæ•¸ç®¡ç†
æ¯å€‹ç’°å¢ƒè‡ªå‹•è¼‰å…¥å°æ‡‰çš„é…ç½®æª”æ¡ˆï¼š

- **é–‹ç™¼ç’°å¢ƒ**ï¼š
  - å‰ç«¯ï¼š`client/.env.development`
  - å¾Œç«¯ï¼š`server/.env.development`
  
- **Docker ç’°å¢ƒ**ï¼š
  - å‰ç«¯ï¼š`client/.env.docker` 
  - å¾Œç«¯ï¼š`server/.env.docker`
  
- **ç”Ÿç”¢ç’°å¢ƒ**ï¼š
  - å‰ç«¯ï¼š`client/.env.production`
  - å¾Œç«¯ï¼š`server/.env.production`

- **Fallback**ï¼š
  - å‰ç«¯ï¼š`client/.env` (é è¨­ç‚ºé–‹ç™¼æ¨¡å¼)
  - å¾Œç«¯ï¼š`server/.env` (é è¨­ç‚ºé–‹ç™¼æ¨¡å¼)

### ç’°å¢ƒåˆ‡æ›æŒ‡ä»¤ç¸½è¦½
```bash
# é–‹ç™¼ç’°å¢ƒ
npm run dev              # å‰å¾Œç«¯åŒæ™‚å•Ÿå‹• (é–‹ç™¼æ¨¡å¼)
npm run dev:client       # åƒ…å‰ç«¯ (é–‹ç™¼æ¨¡å¼)
npm run dev:server       # åƒ…å¾Œç«¯ (é–‹ç™¼æ¨¡å¼)

# Docker ç’°å¢ƒ  
npm run dev:docker       # å‰å¾Œç«¯åŒæ™‚å•Ÿå‹• (Docker æ¨¡å¼)
npm run dev:client:docker # åƒ…å‰ç«¯ (Docker æ¨¡å¼)
npm run dev:server:docker # åƒ…å¾Œç«¯ (Docker æ¨¡å¼)

# å»ºç½®æŒ‡ä»¤
npm run build            # ç”Ÿç”¢ç’°å¢ƒå»ºç½®
npm run build:docker     # Docker ç’°å¢ƒå»ºç½®
npm run build:dev        # é–‹ç™¼ç’°å¢ƒå»ºç½®

# å•Ÿå‹•æŒ‡ä»¤
npm start                # ç”Ÿç”¢æ¨¡å¼å•Ÿå‹•
npm run start:docker     # Docker æ¨¡å¼å•Ÿå‹•
```

## å¸¸è¦‹å•é¡Œè§£æ±º

### ç«¯å£è¡çª
```bash
# æª¢æŸ¥ç«¯å£å ç”¨
netstat -ano | findstr :3000
netstat -ano | findstr :5000
netstat -ano | findstr :5173

# æ®ºæ­»ä½”ç”¨ç«¯å£çš„ç¨‹åº
taskkill /PID <pid> /F
```

### ç’°å¢ƒè®Šæ•¸å•é¡Œ
```bash
# æª¢æŸ¥ç•¶å‰è¼‰å…¥çš„ç’°å¢ƒæª”æ¡ˆ
echo $NODE_ENV                    # Linux/Mac
echo %NODE_ENV%                   # Windows

# ç¢ºèªç’°å¢ƒè®Šæ•¸æ˜¯å¦æ­£ç¢ºè¼‰å…¥
npm run dev:server               # é–‹ç™¼ç’°å¢ƒ (æ‡‰è¼‰å…¥ .env.development)
npm run dev:server:docker        # Docker ç’°å¢ƒ (æ‡‰è¼‰å…¥ .env.docker)
```

### å‰ç«¯ä»£ç†å•é¡Œ
å¦‚æœå‰ç«¯ç„¡æ³•é€£æ¥åˆ°å¾Œç«¯ APIï¼š

1. **æª¢æŸ¥ Vite ä»£ç†è¨­å®š**ï¼š
```javascript
// client/vite.config.js æœƒæ ¹æ“šç’°å¢ƒè®Šæ•¸è¨­å®šä»£ç†
console.log('Proxy target:', env.VITE_PROXY_TARGET);
```

2. **ç¢ºèªç’°å¢ƒè®Šæ•¸è¨­å®š**ï¼š
```bash
# é–‹ç™¼ç’°å¢ƒï¼šå‰ç«¯æ‡‰è©²ä»£ç†åˆ° localhost:5000
# Docker ç’°å¢ƒï¼šå‰ç«¯æ‡‰è©²ä»£ç†åˆ° localhost:3000
```

### å¤šç’°å¢ƒé…ç½®è¡çª
å¦‚æœé‡åˆ°é…ç½®è¡çªï¼š

1. **æ¸…ç†å¿«å–**ï¼š
```bash
# æ¸…ç†å‰ç«¯å¿«å–
cd client && npm run build

# æ¸…ç†å¾Œç«¯ node_modules
cd server && rm -rf node_modules && npm install
```

2. **ç¢ºèªé…ç½®æª”æ¡ˆå„ªå…ˆé †åº**ï¼š
```
1. ç‰¹å®šç’°å¢ƒæª”æ¡ˆ (.env.development/.env.docker/.env.production)
2. é è¨­æª”æ¡ˆ (.env)
3. ç¯„æœ¬æª”æ¡ˆ (.env.example) - åƒ…ä¾›åƒè€ƒ
```

### è³‡æ–™åº«é€£ç·šå•é¡Œ
```bash
# æª¢æŸ¥è³‡æ–™åº«ç‹€æ…‹
npm run db:check

# é‡å°ç‰¹å®šç’°å¢ƒåˆå§‹åŒ–è³‡æ–™åº«
NODE_ENV=development npm run db:init:dev        # Windows: set NODE_ENV=development && npm run db:init:dev:win
NODE_ENV=docker npm run db:init:docker
```

### Docker å•é¡Œ
```bash
# é‡å»ºå®¹å™¨ (æ¸…é™¤å¿«å–)
docker-compose build --no-cache

# æŸ¥çœ‹å®¹å™¨æ—¥èªŒ
docker-compose logs -f app

# æª¢æŸ¥ç’°å¢ƒè®Šæ•¸æ˜¯å¦æ­£ç¢ºè¼‰å…¥
docker-compose exec app env | grep NODE_ENV
docker-compose exec app env | grep DB_HOST

# æ¸…ç†æœªä½¿ç”¨çš„å®¹å™¨å’Œæ˜ åƒ
docker system prune -a
```

### æ—¥èªŒç³»çµ±å•é¡Œ
```bash
# æª¢æŸ¥æ—¥èªŒç›®éŒ„æ˜¯å¦å­˜åœ¨
ls server/logs

# ä½¿ç”¨æ—¥èªŒç®¡ç†å·¥å…·
cd server && node scripts/log-manager.js list
cd server && node scripts/log-manager.js stats

# æ‰‹å‹•æ¸¬è©¦æ—¥èªŒå¯«å…¥
curl http://localhost:5000/api/health    # é–‹ç™¼ç’°å¢ƒ
curl http://localhost:3000/api/health    # Docker/ç”Ÿç”¢ç’°å¢ƒ
```

é€™å€‹å¤šç’°å¢ƒè¨­è¨ˆç¢ºä¿äº†å¾é–‹ç™¼åˆ°éƒ¨ç½²çš„é †æš¢æµç¨‹ï¼Œæ¯å€‹ç’°å¢ƒéƒ½é‡å°å…¶ç‰¹å®šç”¨é€”é€²è¡Œäº†æœ€ä½³åŒ–ã€‚
